<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cadastro de Servi√ßo - Marketserv</title>

    <!-- Bootstrap -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css"
      rel="stylesheet"
    />

    <style>
      :root {
        --azul-marinho: #0a1f44;
      }

      body {
        background-color: #f8f9fa;
        padding-top: 80px;
      }

      .navbar {
        background-color: var(--azul-marinho);
      }

      .form-container {
        max-width: 600px;
        margin: 40px auto;
        background-color: white;
        border-radius: 10px;
        box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
        padding: 30px;
      }

      h2 {
        color: var(--azul-marinho);
        font-weight: 700;
      }

      .btn-primary {
        background-color: var(--azul-marinho);
        border: none;
      }

      .btn-primary:hover {
        background-color: #0e2a63;
      }
    </style>
  </head>

  <body>
    <button onclick="logout()" class="btn btn-outline-light ms-2">Sair</button>

<script>
  function logout() {
    localStorage.removeItem("usuarioLogado");
    window.location.href = "login.html";
  }
</script>

    <script>
  const usuario = localStorage.getItem("usuarioLogado");

  if (usuario !== "prestador") {
    alert("Acesso restrito! Fa√ßa login como prestador de servi√ßos.");
    window.location.href = "login.html";
  }
</script>

    <!-- ====== CABE√áALHO ====== -->
    <nav class="navbar navbar-expand-lg navbar-dark shadow-sm fixed-top">
      <div class="container">
        <a class="navbar-brand fw-bold" href="index.html">
          <i class="bi bi-house-door"></i> Marketserv
        </a>

        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#menu"
        >
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="menu">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item">
              <a class="nav-link" href="index.html">In√≠cio</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="servicos.html">Servi√ßos</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" href="cadastro-servico.html"
                >Cadastrar Servi√ßo</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="login.html">Login</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="cadastro.html">Cadastro</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <!-- ====== FIM CABE√áALHO ====== -->

    <!-- ====== FORMUL√ÅRIO ====== -->
    <div class="container form-container">
      <h2 class="text-center mb-4">Cadastrar Novo Servi√ßo üîß</h2>

      <form id="formServico">
        <div class="mb-3">
          <label for="nomeServico" class="form-label">Nome do Servi√ßo</label>
          <input
            type="text"
            id="nomeServico"
            class="form-control"
            placeholder="Ex: Pintura de parede"
            required
          />
        </div>

        <div class="mb-3">
          <label for="descricao" class="form-label">Descri√ß√£o</label>
          <textarea
            id="descricao"
            class="form-control"
            rows="3"
            placeholder="Descreva o servi√ßo oferecido..."
            required
          ></textarea>
        </div>

        <div class="mb-3">
          <label for="categoria" class="form-label">Categoria</label>
          <select id="categoria" class="form-select" required>
            <option value="">Selecione...</option>
            <option value="Pintura">Pintura</option>
            <option value="Reparos">Reparos</option>
            <option value="Encanamento">Encanamento</option>
            <option value="Jardinagem">Jardinagem</option>
            <option value="El√©trica">El√©trica</option>
            <option value="M√≥veis">M√≥veis</option>
          </select>
        </div>

        <div class="mb-3">
          <label for="preco" class="form-label">Pre√ßo Estimado (R$)</label>
          <input
            type="number"
            id="preco"
            class="form-control"
            placeholder="Ex: 150"
            required
          />
        </div>

        <div class="mb-3">
          <label for="imagem" class="form-label">Imagem (opcional)</label>
          <input type="file" id="imagem" class="form-control" accept="image/*" />
        </div>

        <button type="submit" class="btn btn-primary w-100 mt-3">
          Cadastrar Servi√ßo
        </button>
      </form>

      <div id="mensagem" class="mt-3 text-center fw-semibold"></div>
    </div>

    <!-- ====== SCRIPTS ====== -->
    <script>
      const form = document.getElementById("formServico");
      const mensagem = document.getElementById("mensagem");

      form.addEventListener("submit", (e) => {
        e.preventDefault();

        const nome = document.getElementById("nomeServico").value.trim();
        const descricao = document.getElementById("descricao").value.trim();
        const categoria = document.getElementById("categoria").value;
        const preco = document.getElementById("preco").value.trim();

        if (!nome || !descricao || !categoria || !preco) {
          mensagem.textContent = "‚ö†Ô∏è Preencha todos os campos obrigat√≥rios.";
          mensagem.style.color = "red";
          return;
        }

        // Pega os servi√ßos existentes no LocalStorage
        let servicos = JSON.parse(localStorage.getItem("servicos")) || [];

        const novoServico = {
          id: Date.now(),
          nome,
          descricao,
          categoria,
          preco,
        };

        servicos.push(novoServico);
        localStorage.setItem("servicos", JSON.stringify(servicos));

        form.reset();
        mensagem.textContent = "‚úÖ Servi√ßo cadastrado com sucesso!";
        mensagem.style.color = "green";

        setTimeout(() => {
          mensagem.textContent = "";
        }, 3000);
      });
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
